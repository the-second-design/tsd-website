---
import { Icon } from 'astro-icon/components';
import { Fragment } from 'astro/jsx-runtime';
import { getHomePermalink } from '~/utils/permalinks';

export interface Link {
  text?: string;
  href?: string;
  ariaLabel?: string;
  icon?: string;
}

export interface Props {
  secondaryLinks?: Array<Link>;
  footNote?: string;
  theme?: string;
}

const {
  secondaryLinks = [],
  footNote = `© ${new Date().getFullYear()} The Second Design · All rights reserved.`,
  theme = 'light',
} = Astro.props;

// Social Links — TSD official profiles
const socialLinks = [
  {
    ariaLabel: 'Instagram',
    icon: 'tabler:brand-instagram',
    href: 'https://www.instagram.com/the.second.design',
  },
  {
    ariaLabel: 'YouTube',
    icon: 'tabler:brand-youtube',
    href: 'https://www.youtube.com/@theseconddesign',
  },
  {
    ariaLabel: 'X (Twitter)',
    icon: 'tabler:brand-x',
    href: 'https://x.com/the_2nd_design',
  },
];
---

<footer
  class:list={[
    { dark: theme === 'dark' },
    'relative border-t border-slate-300 dark:border-slate-800 bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-300'
  ]}
>
  <div class="max-w-6xl mx-auto px-4 sm:px-6 py-12 space-y-10">

    <!-- Brand -->
    <div class="text-center">
      <a href={getHomePermalink()} class="text-xl font-semibold tracking-tight dark:text-white">
        The Second Design
      </a>
    </div>

    <!-- Secondary links (Terms, Privacy) -->
    { secondaryLinks.length > 0 && (
      <div class="flex flex-wrap justify-center gap-4 text-sm text-slate-500 dark:text-slate-400">
        {
          secondaryLinks.map(({ text, href }) => (
            <a
              href={href}
              class="hover:text-slate-900 dark:hover:text-white transition"
              set:html={text}
            />
          ))
        }
      </div>
    )}

    <!-- Social Icons -->
    <div class="flex justify-center gap-5">
      {
        socialLinks.map(({ ariaLabel, href, icon }) => (
          <a
            aria-label={ariaLabel}
            href={href}
            target="_blank"
            rel="noopener noreferrer"
            class="p-2.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition text-slate-600 dark:text-slate-300"
          >
            <Icon name={icon} class="w-5 h-5" />
          </a>
        ))
      }
    </div>

    <!-- Footnote -->
    <div class="text-center text-sm text-slate-500 dark:text-slate-500 pt-6">
      <Fragment set:html={footNote} />
    </div>

  </div>
</footer>